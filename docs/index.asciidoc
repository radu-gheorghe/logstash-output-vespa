:plugin: example
:type: output
:default_codec: plain
// Update header with plugin name and default codec

///////////////////////////////////////////
START - GENERATED VARIABLES, DO NOT EDIT!
///////////////////////////////////////////
:version: %VERSION%
:release_date: %RELEASE_DATE%
:changelog_url: %CHANGELOG_URL%
:include_path: ../../../../logstash/docs/include
///////////////////////////////////////////
END - GENERATED VARIABLES, DO NOT EDIT!
///////////////////////////////////////////

[id="plugins-{type}s-{plugin}"]

=== Vesoa output plugin

include::{include_path}/plugin_header.asciidoc[]

==== Description

Writes documents to Vespa.

// Format anchors and links to support generated ids for versioning
// Sample anchor: [id="plugins-{type}s-{plugin}-setting_name"]
// Sample link: <<plugins-{type}s-{plugin}-setting_name>>

[id="plugins-{type}s-{plugin}-options"]
==== Vespa Output Configuration Options

[cols="<,<,<",options="header",]
|=======================================================================
|Setting |Input type|Required
| <<plugins-{type}s-{plugin}-vespa_url>> |<<string,string>>|No
| <<plugins-{type}s-{plugin}-namespace>> |<<string,string>>|Yes
| <<plugins-{type}s-{plugin}-document_type>> |<<string,string>>|Yes
| <<plugins-{type}s-{plugin}-id_field>> |<<string,string>>|No
| <<plugins-{type}s-{plugin}-max_retries>> |<<number,number>>|No
| <<plugins-{type}s-{plugin}-max_connections>> |<<number,number>>|No
| <<plugins-{type}s-{plugin}-max_streams>> |<<number,number>>|No
| <<plugins-{type}s-{plugin}-operation_timeout>> |<<number,number>>|No
| <<plugins-{type}s-{plugin}-grace_period>> |<<number,number>>|No
|=======================================================================

[id="plugins-{type}s-{plugin}-vespa_url"]
===== `vespa_url`

* Value type is <<string,string>>
* Default value is `http://localhost:8080`

URL to the Vespa instance

[id="plugins-{type}s-{plugin}-namespace"]
===== `namespace`

* Value type is <<string,string>>

Vespa namespace. A logical grouping of documents in Vespa

[id="plugins-{type}s-{plugin}-document_type"]
===== `document_type`

* Value type is <<string,string>>

Document type. You should see it in the Vespa services.xml file as well as in the schema file

[id="plugins-{type}s-{plugin}-id_field"]
===== `id_field`

* Value type is <<string,string>>
* Default value is `id`

Field to get the document id from. If not present, a UUID will be generated

[id="plugins-{type}s-{plugin}-max_retries"]
===== `max_retries`

* Value type is <<number,number>>
* Default value is `60`

On failure, retry this many times

[id="plugins-{type}s-{plugin}-max_connections"]
===== `max_connections`

* Value type is <<number,number>>
* Default value is `1`

How many HTTP/2 connections to keep open.

[id="plugins-{type}s-{plugin}-max_streams"]
===== `max_streams`

* Value type is <<number,number>>
* Default value is `128`

Number of streams per connection. This is the number of concurrent requests that can be made on a single connection.

[id="plugins-{type}s-{plugin}-operation_timeout"]
===== `operation_timeout`

* Value type is <<number,number>>
* Default value is `180`

Request timeout (in seconds) for each write operation.

[id="plugins-{type}s-{plugin}-grace_period"]
===== `grace_period`

* Value type is <<number,number>>
* Default value is `10`

After this time (seconds), the circuit breaker will be half-open:
it will ping the endpoint to see if it's back,
then resume sending requests when it's back.

// The full list of Value Types is here: 
// https://www.elastic.co/guide/en/logstash/current/configuration-file-structure.html

[id="plugins-{type}s-{plugin}-common-options"]
include::{include_path}/{type}.asciidoc[]

:default_codec!:
